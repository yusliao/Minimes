# MiniMES 记账系统 - 用户手册

> **版本**：v1.0.0
> **更新日期**：2026-01-21
> **适用对象**：操作员、管理员、系统管理员

---

## 目录

1. [快速开始（5分钟上手）](#1-快速开始5分钟上手)
2. [操作员使用指南](#2-操作员使用指南)
3. [管理员使用指南](#3-管理员使用指南)
4. [硬件设备说明](#4-硬件设备说明)
5. [常见问题解答（FAQ）](#5-常见问题解答faq)
6. [附录](#6-附录)
7. [联系支持](#7-联系支持)

---

## 1. 快速开始（5分钟上手）

### 1.1 登录系统

#### 怎么登录？

1. 打开浏览器（推荐Chrome、Edge、Firefox）
2. 输入网址：`http://localhost:5000`（本地部署）或者公司提供的网址
3. 看到登录页面后：
   - 在"用户名"框输入你的用户名
   - 在"密码"框输入你的密码
   - 点"登录"按钮

**[截图：login-page.png - 登录页面，标注①用户名输入框 ②密码输入框 ③登录按钮]**

#### 🎯 演示账户（试用模式）

如果你想先试试系统，可以用演示账户登录：

- **用户名**：`demo`
- **密码**：`demo123`
- **特点**：登录后硬件（电子秤、扫码枪）会自动模拟数据，不需要真实设备

💡 **小提示**：演示模式下，重量会自动跳动，条码会自动推送，方便你熟悉操作流程！

---

### 1.2 认识首页

登录成功后，你会看到系统首页，上面有几个大卡片（功能按钮）。

#### 操作员看到的首页（2个功能）

- **🏭 生产称重**：扫码→称重→存档
- **📋 生产记录查询**：查看历史称重记录

**[截图：dashboard-operator.png - 操作员首页，标注2个功能卡片]**

#### 管理员看到的首页（更多功能）

除了操作员的2个功能，管理员还能看到：

- **👥 客户管理**：添加、编辑、删除客户
- **📦 商品管理**：添加、编辑、删除商品批次
- **📊 生产报表**：统计数据、导出Excel
- **🔧 硬件测试**：测试电子秤和扫码枪
- **⚙️ 系统设置**：系统状态、数据库备份
- **👤 用户管理**：添加、编辑、删除用户

**[截图：dashboard-admin.png - 管理员首页，标注所有功能卡片]**

💡 **小提示**：页面右上角显示你的姓名和角色（操作员/管理员），点击可以退出登录！

---

### 1.3 完成第一次称重

跟着老王我一步步来，5分钟学会称重操作！

#### 步骤1：进入生产称重页面

- 点首页的"🏭 生产称重"卡片
- 进入称重操作页面

**[截图：weighing-page.png - 称重页面整体布局]**

#### 步骤2：扫商品条码

- **方式A**：用扫码枪对准商品条码，滴一声就行
- **方式B**：手动在"条码输入框"输入条码，按回车键
- ✅ 看到"✓ 条码已输入"提示就成功了

**[截图：barcode-input.png - 条码输入区，标注①输入框 ②成功提示]**

#### 步骤3：读取重量

- **方式A**：把东西放电子秤上，等重量稳定（数字不跳了）
- **方式B**：手动在"重量输入框"输入重量值
- 演示模式下，重量会自动推送（不需要真实电子秤）

**[截图：weight-input.png - 重量输入区，标注①重量显示 ②稳定提示]**

#### 步骤4：选择加工阶段

三个选项，选一个：

- ⭕ **原料入库**：刚收到的原材料，第一次称重
- ⭕ **加工过程**：半成品，加工中的检测称重
- ⭕ **成品出库**：最终产品，发货前称重

💡 **重要**：这个阶段很关键，后面统计损耗率要用到！选错了损耗率就不准了！

**[截图：stage-select.png - 阶段选择，标注三个单选框]**

#### 步骤5：保存记录

- **方式A**：点"💾 保存记录"按钮
- **方式B**：在重量输入框直接按回车键（更快！）
- ✅ 看到"保存成功"提示
- 表单自动清空，光标回到条码输入框
- 开始扫下一个

**[截图：save-button.png - 保存按钮和成功提示]**

#### 右边的统计面板

称重页面右侧有实时统计：

- **今日统计**：今天称了多少次，总重量多少
- **最近10条记录**：看看刚刚称的对不对，有错可以删

**[截图：statistics-panel.png - 右侧统计面板]**

---

🎉 **恭喜！** 你已经完成了第一次称重操作！是不是很简单？

---

## 2. 操作员使用指南

操作员的主要工作就是：**扫码→称重→存档**，然后查看历史记录。

---

### 2.1 生产称重操作

#### 什么时候用这个功能？

- ✅ 原材料进来要称重（入库）
- ✅ 加工过程中要检测重量（加工中）
- ✅ 成品出库前要称重（出库）

#### 详细操作步骤

##### 步骤1：扫描商品条码

**使用扫码枪**：
- 拿扫码枪对准商品上的条码
- 滴一声，条码自动填入输入框
- ✅ 看到"✓ 条码已输入"提示

**没有扫码枪？手动输入**：
- 在"条码输入框"手敲条码
- 按回车键
- ✅ 看到"✓ 条码已输入"提示

💡 **小提示**：输入条码后，系统会自动查询商品信息，如果找到会显示商品名称！

**[截图：barcode-input-detail.png - 条码输入区详细标注]**

---

##### 步骤2：读取重量

**使用电子秤（自动读取）**：
1. 把商品放在电子秤上
2. 等重量稳定（数字不再跳动）
3. 系统自动显示重量
4. ✅ 看到"✓ 重量稳定"提示

**没有电子秤？手动输入**：
1. 在"重量输入框"手动输入重量值
2. 单位默认是公斤（kg）
3. 可以输入小数，比如 2.55

💡 **小提示**：演示模式下，重量会自动推送并跳动，模拟真实电子秤的行为！

**[截图：weight-input-detail.png - 重量输入区详细标注]**

---

##### 步骤3：选择加工阶段

三个阶段，必须选一个：

| 阶段 | 什么时候选 | 说明 |
|-----|-----------|------|
| **原料入库** | 刚收到的原材料 | 这是第一次称重，记录原始重量 |
| **加工过程** | 加工中的半成品 | 中间环节的检测称重 |
| **成品出库** | 最终产品发货 | 最后一次称重，用于计算损耗率 |

💡 **重要说明**：
- 同一个条码，要经过"入库→加工→出库"三个阶段
- 系统会根据这三个阶段的重量，自动计算损耗率
- **损耗率** = (入库重量 - 出库重量) ÷ 入库重量 × 100%

**举例**：
- 入库：100kg（原材料）
- 加工：95kg（去掉杂质）
- 出库：85kg（最终成品）
- **损耗率** = (100 - 85) ÷ 100 = **15%**

**[截图：stage-select-detail.png - 阶段选择详细说明]**

---

##### 步骤4：填写备注（可选）

- 可以在"备注"框输入额外信息
- 比如：正常、有瑕疵、客户要求特殊处理
- 不是必填项，可以留空

---

##### 步骤5：保存记录

**两种保存方式**：

1. **点按钮**：点"💾 保存记录"按钮
2. **按回车**（推荐）：在重量输入框按回车键（更快！）

保存成功后：
- ✅ 弹出"保存成功"提示
- 表单自动清空
- 光标自动回到条码输入框
- 准备扫下一个

**[截图：save-success.png - 保存成功提示]**

---

#### 右侧统计面板

称重页面右侧有两个区域：

##### 今日统计（实时更新）

- **今日记录数**：今天一共称了几次
- **今日总重量**：今天称的所有东西加起来多少公斤

**[截图：today-stats.png - 今日统计卡片]**

##### 最近10条记录

显示你最近称的10条记录：

| 时间 | 条码 | 阶段 | 重量 | 备注 | 操作 |
|------|------|------|------|------|------|
| 14:30:25 | 6901234567890 | 入库 | 2.50 kg | 正常 | 🗑️ |
| 14:28:10 | 6901234567891 | 加工 | 1.85 kg | - | 🗑️ |

- 点🗑️删除按钮可以删除记录（会弹确认框）
- ⚠️ **注意**：删了就找不回来了，删之前看仔细！

**[截图：recent-records.png - 最近记录列表]**

---

#### 常见操作技巧

💡 **连续称重，怎么最快？**

1. 扫码（或手输条码） → 回车
2. 等重量稳定（或手输重量）
3. 选阶段
4. 回车（直接保存）
5. 重复步骤1

💡 **条码总是扫不出来？**

- 检查扫码枪USB线插好了没
- 试试手动输入条码
- 联系管理员或IT支持

💡 **重量一直跳动，不稳定？**

- 等一会儿，让电子秤稳定
- 检查秤放平了没
- 点"去皮"按钮（硬件测试页面）

---

### 2.2 称重记录查询

#### 什么时候用这个功能？

- ✅ 想找以前某个批次的记录
- ✅ 想看今天称了多少
- ✅ 要核对某个条码的数据
- ✅ 要检查某个时间段的操作

#### 怎么查询？

进入查询页面：首页 → 点"📋 生产记录查询"卡片

**[截图：records-query-page.png - 查询页面整体布局]**

---

#### 查询方式1：按条码查

1. 在"条码过滤"框输入条码
2. 点"查询"按钮（或按回车）
3. 只显示这个条码的所有记录

**[截图：query-by-barcode.png - 条码查询]**

---

#### 查询方式2：按阶段查

1. 在"阶段过滤"下拉框选择：
   - 原料入库
   - 加工过程
   - 成品出库
2. 点"查询"按钮
3. 只显示这个阶段的记录

**[截图：query-by-stage.png - 阶段查询]**

---

#### 查询方式3：按日期查

1. 选择"开始日期"
2. 选择"结束日期"
3. 点"查询"按钮
4. 显示这段时间的所有记录

💡 **小提示**：不选日期就显示全部记录（可能很多，加载慢）

**[截图：query-by-date.png - 日期查询]**

---

#### 查询方式4：组合查询

可以同时使用多个条件：

- 条码 = 6901234567890
- 阶段 = 原料入库
- 日期 = 2026-01-15 到 2026-01-21

点"查询"按钮，只显示同时满足这三个条件的记录！

---

#### 清空查询条件

点"清空"按钮，所有过滤条件重置，显示全部记录。

---

#### 查看查询结果

查询结果用表格显示：

| 时间 | 条码 | 阶段 | 重量 | 操作员 | 备注 | 操作 |
|------|------|------|------|--------|------|------|
| 01-21 14:30 | 6901234567890 | 入库 | 2.50 kg | operator | 正常 | 🗑️删除 |
| 01-21 14:28 | 6901234567891 | 加工 | 1.85 kg | admin | - | 🗑️删除 |

**列说明**：
- **时间**：称重的日期和时间
- **条码**：商品条码
- **阶段**：原料入库/加工过程/成品出库
- **重量**：称重值（kg）
- **操作员**：是谁称的
- **备注**：额外信息
- **操作**：删除按钮

---

#### 删除记录

1. 点某条记录后面的🗑️删除按钮
2. 弹出确认框："确定要删除这条记录吗？"
3. 点"确定"→ 记录被删除
4. 点"取消"→ 不删除

⚠️ **重要警告**：删了就找不回来了！删之前一定要看仔细！

**[截图：delete-confirm.png - 删除确认对话框]**

---

#### 权限说明

💡 **操作员只能看自己的记录！**

- 操作员A登录，只能看到操作员A称的记录
- 操作员B登录，只能看到操作员B称的记录
- 管理员登录，可以看到所有人的记录

---

### 2.3 个人中心

#### 干啥用的？

- ✅ 查看自己的操作统计
- ✅ 修改自己的姓名
- ✅ 修改自己的密码

进入个人中心：点右上角你的姓名 → 点"个人中心"

**[截图：profile-page.png - 个人中心页面]**

---

#### 我的操作统计

三个统计卡片：

| 统计项 | 说明 |
|--------|------|
| **今日记录** | 今天称了几次，总重量多少 |
| **本月记录** | 这个月称了几次，总重量多少 |
| **总计记录** | 从开始到现在一共称了几次，总重量多少 |

**[截图：operation-stats.png - 操作统计卡片]**

---

#### 修改姓名

1. 在"新姓名"框输入你的新名字
2. 点"保存姓名"按钮
3. ✅ 看到"姓名修改成功"提示

💡 **注意**：只能改姓名，不能改用户名！用户名是唯一标识，不允许修改。

**[截图：change-name.png - 修改姓名表单]**

---

#### 修改密码

1. 在"当前密码"框输入你现在的密码
2. 在"新密码"框输入新密码
   - **要求**：至少8位，必须包含大小写字母和数字
   - **举例**：`MyPassword123`（✅ 符合要求）
   - **不行**：`12345678`（❌ 没有字母）
   - **不行**：`password`（❌ 没有数字和大写字母）
3. 在"确认密码"框再输一遍新密码（防止输错）
4. 点"保存密码"按钮
5. ✅ 看到"密码修改成功"提示

⚠️ **密码安全提示**：
- 🔴 不要用太简单的密码（比如123456、password）
- 🔴 不要把密码告诉别人
- 🔴 定期更换密码（建议3个月换一次）

**[截图：change-password.png - 修改密码表单]**

---

### 2.4 常见问题

#### ❓ 扫码枪没反应怎么办？

**可能原因**：
- USB线松了或没插好
- 扫码枪坏了
- 条码太模糊，扫不出来

**解决方案**：
1. 检查USB线插好了没
2. 重新插拔USB线
3. 换一个USB口试试
4. 试试手动输入条码
5. 联系管理员或IT支持

---

#### ❓ 电子秤显示不准？

**可能原因**：
- 秤上有东西（没去皮）
- 秤没放平
- 秤坏了

**解决方案**：
1. 看看秤上有没有东西，去皮试试
2. 检查秤放平了没
3. 去"硬件测试"页面检查连接状态
4. 联系管理员

---

#### ❓ 找不到之前的记录？

**解决方案**：
1. 去"生产记录查询"页面
2. 输入条码搜索
3. 或者选择日期范围查询
4. 检查是不是被删除了（删了就找不回来了）

---

#### ❓ 密码忘记了？

**解决方案**：
1. 联系管理员重置密码
2. 管理员在"用户管理"→"编辑用户"→"重置密码"
3. 重置后，管理员会告诉你新密码
4. 登录后赶紧改成自己记得住的密码

---

#### ❓ 不小心删错记录了？

**抱歉**：
- ❌ 删了就找不回来了
- ❌ 系统没有"撤销"功能
- ✅ 只能重新称一次

**预防措施**：
- 🔴 删之前一定要看仔细！
- 🔴 确认对话框不要瞎点"确定"

---

#### ❓ 条码扫不出来，但是手输也不行？

**可能原因**：
- 条码格式错误
- 商品没有在系统中录入

**解决方案**：
1. 检查条码是不是输对了
2. 联系管理员，看看商品有没有在"商品管理"中录入
3. 如果没有，让管理员先添加商品

---

#### ❓ 保存时提示"条码不能为空"？

**原因**：
- 没有输入条码就点保存了

**解决方案**：
1. 先扫码或手输条码
2. 再点保存

---

#### ❓ 保存时提示"重量必须大于0"？

**原因**：
- 重量没有输入，或者输入了0

**解决方案**：
1. 等电子秤推送重量
2. 或者手动输入重量值（必须大于0）

---

#### ❓ 登录后看不到"生产称重"功能？

**原因**：
- 你的账号被禁用了
- 或者权限不对

**解决方案**：
1. 联系管理员检查你的账号状态
2. 确认你的角色是"操作员"或"管理员"

---

## 3. 管理员使用指南

管理员除了操作员的所有功能，还能管理客户、商品、用户、查看报表、测试硬件、设置系统。

---

### 3.1 客户管理

#### 什么时候用这个功能？

- ✅ 新客户来了，要添加到系统
- ✅ 客户电话变了，要更新信息
- ✅ 客户不合作了，要删除

⚠️ **权限说明**：只有管理员能使用客户管理功能，操作员看不到！

---

#### 查看客户列表

首页 → 点"👥 客户管理"卡片 → 进入客户列表页面

**页面显示**：
- 搜索框（输入客户代码、名称、联系人、电话都行）
- 客户列表表格
- "添加新客户"按钮

**[截图：customers-list.png - 客户列表页面]**

---

#### 搜索客户

1. 在搜索框输入关键词：
   - 客户代码：CUST001
   - 客户名称：老李理发店
   - 联系人：老李
   - 电话：138xxxx
2. 点"搜索"按钮（或按回车）
3. 只显示匹配的客户
4. 点"清空"按钮显示全部客户

**[截图：customers-search.png - 客户搜索]**

---

#### 添加新客户

1. 点"添加新客户"按钮
2. 进入添加客户页面
3. 填写表单：

| 字段 | 必填？ | 说明 | 示例 |
|-----|--------|------|------|
| **客户代码** | ✅ 必填 | 唯一标识，不能重复 | CUST001 |
| **客户名称** | ✅ 必填 | 客户的公司或店名 | 老李理发店 |
| 联系人 | 可选 | 主要联系人姓名 | 老李 |
| 电话 | 可选 | 联系电话 | 13812345678 |
| 邮箱 | 可选 | 电子邮箱 | laowang@example.com |
| 地址 | 可选 | 详细地址 | 某某街道123号 |
| 备注 | 可选 | 额外信息 | VIP客户 |

4. 点"保存"按钮
5. ✅ 看到"客户创建成功"提示
6. 自动跳回客户列表页面

**[截图：customer-create.png - 添加客户表单]**

---

#### 编辑客户

1. 在客户列表找到要编辑的客户
2. 点"编辑"按钮
3. 进入编辑页面（字段跟添加时一样）
4. 修改信息
   - ⚠️ **注意**：客户代码不能改（唯一标识）
5. 点"保存"按钮
6. ✅ 看到"客户更新成功"提示

**[截图：customer-edit.png - 编辑客户表单]**

---

#### 删除客户

1. 在客户列表找到要删除的客户
2. 点"删除"按钮
3. 弹出确认框："确定要删除客户【老李理发店】吗？"
4. 点"确定" → 客户被删除
5. 点"取消" → 不删除

⚠️ **重要警告**：
- 🔴 删了就找不回来了！
- 🔴 如果有称重记录关联这个客户，可能会影响数据完整性
- 🔴 删之前一定要三思！

**[截图：customer-delete-confirm.png - 删除客户确认对话框]**

---

### 3.2 商品管理

#### 什么时候用这个功能？

- ✅ 新商品批次到货，要添加到系统
- ✅ 商品信息变了，要更新
- ✅ 商品停产了，要删除

⚠️ **权限说明**：操作员和管理员都能使用商品管理功能！

---

#### 查看商品列表

首页 → 点"📦 商品管理"卡片 → 进入商品列表页面

**页面显示**：
- 搜索框（输入条码、名称都行）
- 商品列表表格
- "添加新商品"按钮

**[截图：products-list.png - 商品列表页面]**

---

#### 搜索商品

1. 在搜索框输入关键词：
   - 商品条码：6901234567890
   - 商品名称：大米
2. 点"搜索"按钮（或按回车）
3. 只显示匹配的商品
4. 点"清空"按钮显示全部商品

---

#### 添加新商品

1. 点"添加新商品"按钮
2. 进入添加商品页面
3. 填写表单：

| 字段 | 必填？ | 说明 | 示例 |
|-----|--------|------|------|
| **商品条码** | ✅ 必填 | 唯一标识，不能重复 | 6901234567890 |
| **商品名称** | ✅ 必填 | 商品的名称 | 大米（5kg装） |
| 规格 | 可选 | 规格说明 | 5kg/袋 |
| 单位 | 可选 | 计量单位 | 袋 |
| 参考价格 | 可选 | 成本价或售价 | 25.50 |
| 备注 | 可选 | 额外信息 | 东北大米 |

4. 点"保存"按钮
5. ✅ 看到"商品创建成功"提示
6. 自动跳回商品列表页面

💡 **小提示**：参考价格可以不填，但填了方便以后做成本核算！

**[截图：product-create.png - 添加商品表单]**

---

#### 编辑商品

1. 在商品列表找到要编辑的商品
2. 点"编辑"按钮
3. 进入编辑页面（字段跟添加时一样）
4. 修改信息
   - ⚠️ **注意**：商品条码不能改（唯一标识）
5. 点"保存"按钮
6. ✅ 看到"商品更新成功"提示

---

#### 删除商品

1. 在商品列表找到要删除的商品
2. 点"删除"按钮
3. 弹出确认框："确定要删除商品【大米（5kg装）】吗？"
4. 点"确定" → 商品被删除

⚠️ **重要警告**：
- 🔴 删了就找不回来了！
- 🔴 如果有称重记录关联这个商品，可能会影响数据完整性
- 🔴 删之前一定要三思！

---

### 3.3 用户管理

#### 管理员权限和操作员权限的区别

系统有两种角色：**操作员**和**管理员**。

| 功能 | 操作员 | 管理员 |
|------|--------|--------|
| 首页、个人中心 | ✅ | ✅ |
| 生产称重 | ✅ | ✅ |
| 称重记录查询 | ✅（只看自己的） | ✅（看所有人的） |
| 商品管理 | ✅ | ✅ |
| **客户管理** | ❌ | ✅ |
| **用户管理** | ❌ | ✅ |
| **生产报表** | ❌ | ✅ |
| **质量追溯** | ❌ | ✅ |
| **硬件测试** | ❌ | ✅ |
| **系统设置** | ❌ | ✅ |

💡 **简单理解**：
- **操作员**：只能干活（称重、查记录、管商品）
- **管理员**：能管人、管系统、看报表

⚠️ **权限说明**：只有管理员能使用用户管理功能！

---

#### 查看用户列表

首页 → 点"👤 用户管理"卡片 → 进入用户列表页面

**页面显示**：
- 用户列表表格
- 统计信息（总用户数、管理员数、操作员数、活跃用户数）
- "添加新用户"按钮

**[截图：users-list.png - 用户列表页面]**

---

#### 用户列表表格说明

| 列名 | 说明 |
|------|------|
| **用户名** | 登录用户名（唯一标识） |
| **姓名** | 真实姓名 |
| **角色** | 操作员/管理员（带颜色徽章） |
| **状态** | 活跃/禁用 |
| **创建时间** | 账号创建日期 |
| **操作** | 编辑/删除按钮 |

**角色徽章**：
- 🔵 蓝色"管理员"徽章 → Administrator
- 🟢 绿色"操作员"徽章 → Operator

**[截图：users-table.png - 用户列表表格]**

---

#### 添加新用户

1. 点"添加新用户"按钮
2. 进入添加用户页面
3. 填写表单：

| 字段 | 必填？ | 说明 | 要求 |
|-----|--------|------|------|
| **用户名** | ✅ 必填 | 登录用户名，不能重复 | 字母、数字、下划线 |
| **全名** | ✅ 必填 | 真实姓名 | 中文或英文 |
| **密码** | ✅ 必填 | 登录密码 | 至少8位，大小写字母+数字 |
| **确认密码** | ✅ 必填 | 再输一遍密码 | 必须与密码一致 |
| **角色** | ✅ 必选 | 选择"管理员"或"操作员" | - |
| **状态** | ✅ 必选 | 选择"活跃"或"禁用" | 默认"活跃" |

4. 点"保存"按钮
5. ✅ 看到"用户创建成功"提示
6. 自动跳回用户列表页面

**[截图：user-create.png - 添加用户表单]**

💡 **权限说明面板**：

添加用户页面右侧有权限说明，帮你理解两种角色的区别。

---

#### 编辑用户

1. 在用户列表找到要编辑的用户
2. 点"编辑"按钮
3. 进入编辑页面
4. 可以修改：
   - ✅ 姓名
   - ✅ 角色（管理员 ↔ 操作员）
   - ✅ 状态（活跃 ↔ 禁用）
   - ✅ 重置密码
5. ⚠️ **不能修改**：用户名（唯一标识，不允许修改）
6. 点"保存"按钮
7. ✅ 看到"用户更新成功"提示

**[截图：user-edit.png - 编辑用户表单]**

---

#### 重置用户密码

在编辑用户页面：

1. 勾选"重置密码"复选框
2. 输入新密码（至少8位，大小写字母+数字）
3. 再输一遍确认密码
4. 点"保存"按钮
5. ✅ 密码重置成功
6. 告诉用户新密码，让他登录后自己改

**[截图：user-reset-password.png - 重置密码区域]**

---

#### 删除用户

1. 在用户列表找到要删除的用户
2. 点"删除"按钮
3. 弹出确认框："确定要删除用户【operator】吗？"
4. 点"确定" → 用户被删除

⚠️ **重要警告**：
- 🔴 **系统必须至少保留一个管理员！**
- 🔴 不能删除最后一个管理员账户（系统会阻止）
- 🔴 删除用户后，他的称重记录不会被删除（保留历史数据）

**[截图：user-delete-confirm.png - 删除用户确认对话框]**

---

#### 安全防护机制

系统有两个安全防护：

1. **防止删除最后一个管理员**
   - 如果你要删除的是最后一个活跃的管理员
   - 系统会弹出错误："不能删除最后一个管理员！"
   - 必须先添加一个新管理员，才能删除旧管理员

2. **防止降级最后一个管理员**
   - 如果你要把最后一个管理员改成操作员
   - 系统会弹出错误："不能降级最后一个管理员！"
   - 必须先添加一个新管理员，才能降级旧管理员

💡 **为什么这样设计？**
防止误操作导致系统没有管理员，无法管理用户和系统设置！

---

### 3.4 生产报表与导出

#### 什么时候用这个功能？

- ✅ 周末要出一周的生产报表
- ✅ 月底要统计这个月的产量
- ✅ 老板要看某个商品的损耗率
- ✅ 要导出Excel发给财务

⚠️ **权限说明**：只有管理员能使用生产报表功能！

---

#### 进入生产报表页面

首页 → 点"📊 生产报表"卡片 → 进入报表页面

**页面布局**：
- 顶部：时间周期选择
- 左侧：环节统计和损耗率统计
- 右侧：按钮（导出Excel）

**[截图：reports-production.png - 生产报表页面整体布局]**

---

#### 选择时间周期

四个选项：

| 选项 | 说明 | 日期范围 |
|-----|------|---------|
| **今天** | 只看今天的数据 | 当天00:00 - 23:59 |
| **本周** | 最近7天 | 今天往前推7天 |
| **本月** | 最近30天 | 今天往前推30天 |
| **自定义** | 选择开始和结束日期 | 自己选 |

**操作方式**：
1. 点选一个单选按钮（今天/本周/本月/自定义）
2. 如果选"自定义"，再选开始日期和结束日期
3. 点"查询"按钮
4. 统计数据自动更新

**[截图：reports-period-select.png - 时间周期选择]**

---

#### 按加工阶段过滤

三个选项：

| 选项 | 说明 |
|-----|------|
| **全部** | 所有阶段的记录 |
| **原料入库** | 只看入库记录 |
| **加工过程** | 只看加工记录 |
| **成品出库** | 只看出库记录 |

---

#### 统计汇总卡片

三个指标：

| 指标 | 说明 |
|------|------|
| **总记录数** | 这段时间一共称了几次 |
| **总重量** | 所有记录的重量加起来（kg） |
| **平均重量** | 平均每次称多少（kg） |

**举例**：
- 总记录数：175次
- 总重量：346.5 kg
- 平均重量：1.98 kg

**[截图：reports-summary.png - 统计汇总卡片]**

---

#### 按加工环节统计表

按三个阶段分别统计：

| 环节 | 记录数 | 总重量 | 平均重量 | 最大重量 | 最小重量 |
|------|--------|--------|---------|---------|---------|
| 原料入库 | 50次 | 125.8 kg | 2.52 kg | 5.0 kg | 0.5 kg |
| 加工过程 | 80次 | 115.2 kg | 1.44 kg | 4.8 kg | 0.3 kg |
| 成品出库 | 45次 | 105.6 kg | 2.35 kg | 4.5 kg | 0.5 kg |

**列说明**：
- **环节**：原料入库/加工过程/成品出库
- **记录数**：这个环节称了几次
- **总重量**：这个环节所有记录的重量加起来
- **平均重量**：这个环节平均每次称多少
- **最大重量**：这个环节最重的一次
- **最小重量**：这个环节最轻的一次

**[截图：reports-stage-stats.png - 环节统计表]**

---

#### 商品损耗率统计（重要！）

按条码统计每个商品的损耗率：

| 条码 | 入库(kg) | 加工(kg) | 出库(kg) | 损耗量(kg) | 损耗率 | 记录数 |
|------|---------|---------|---------|-----------|--------|--------|
| 6901234567890 | 100.5 | 95.2 | 85.3 | 15.2 | 🔴 **15.1%** | 入:5/加:10/出:8 |
| 6901234567891 | 200.8 | 190.5 | 195.2 | 5.6 | 🟡 **2.8%** | 入:8/加:15/出:12 |
| 6901234567892 | 150.3 | 145.8 | 148.5 | 1.8 | 🟢 **1.2%** | 入:6/加:12/出:9 |

---

##### 损耗率怎么算？

**公式**：

```
损耗率 = (入库重量 - 出库重量) ÷ 入库重量 × 100%
```

**举例**：
- 入库：100kg（原材料）
- 出库：85kg（最终成品）
- 损耗量 = 100 - 85 = 15kg
- 损耗率 = 15 ÷ 100 × 100% = **15%**

💡 **注意**：加工环节的重量不参与损耗率计算，只是中间检测数据！

---

##### 颜色编码啥意思？

损耗率用颜色标记，方便一眼看出问题：

| 颜色 | 损耗率范围 | 说明 | 应对措施 |
|------|-----------|------|---------|
| 🟢 **绿色** | ≤5% | 正常，损耗率很低 | 继续保持 |
| 🟡 **黄色** | 5-10% | 注意，损耗有点高 | 留意观察 |
| 🟠 **橙色** | 10-20% | 警告，损耗率偏高 | 检查原因 |
| 🔴 **红色** | >20% | 严重，损耗率太高 | 立即处理！ |

**[截图：reports-loss-rate.png - 损耗率统计表，标注颜色编码]**

---

##### 记录数说明

表格最后一列显示记录数：

- **入:5** → 这个条码有5次入库记录
- **加:10** → 这个条码有10次加工记录
- **出:8** → 这个条码有8次出库记录

💡 **小提示**：正常情况下，入库、加工、出库的记录数应该差不多。如果差太多，可能有问题！

---

#### 导出Excel

点"导出Excel"按钮，浏览器自动下载Excel文件。

**文件名格式**：
```
生产报表_20260121_143025.xlsx
```

**文件内容**：
1. **汇总统计**工作表：总记录数、总重量、平均重量
2. **环节统计**工作表：按阶段统计的详细数据
3. **损耗率统计**工作表：每个条码的损耗率（带颜色编码）

💡 **小提示**：用Excel或WPS打开文件，损耗率的颜色编码会保留！

**[截图：reports-export.png - 导出按钮和下载提示]**

---

### 3.5 质量追溯

#### 什么时候用这个功能？

- ✅ 客户投诉某批次商品质量问题
- ✅ 要追查某个条码的完整操作历史
- ✅ 要看某个商品从入库到出库的全过程
- ✅ 要查某个条码的损耗率

⚠️ **权限说明**：只有管理员能使用质量追溯功能！

---

#### 进入质量追溯页面

首页 → 点"🔍 质量追溯"（在报表菜单下） → 进入追溯页面

**页面布局**：
- 顶部：条码搜索框
- 中间：条码信息卡片 + 环节统计
- 底部：操作时间线

**[截图：tracing-page.png - 质量追溯页面整体布局]**

---

#### 搜索条码

1. 在"条码搜索"框输入商品条码
2. 点"搜索"按钮（或按回车键）
3. 系统显示这个条码的所有操作记录

**[截图：tracing-search.png - 条码搜索]**

---

#### 条码信息卡片

显示这个条码的基本信息：

| 信息 | 说明 |
|------|------|
| **条码值** | 商品条码（如 6901234567890） |
| **总记录数** | 这个条码一共称了几次 |
| **首次操作** | 第一次称重的时间 |
| **最后操作** | 最近一次称重的时间 |

**举例**：
- 条码值：6901234567890
- 总记录数：23次
- 首次操作：2026-01-01 08:30:15
- 最后操作：2026-01-21 16:45:30

**[截图：tracing-barcode-info.png - 条码信息卡片]**

---

#### 环节统计（三列布局）

按三个阶段分别统计：

| 原料入库 | 加工过程 | 成品出库 |
|---------|---------|---------|
| 100.5 kg | 95.2 kg | 85.3 kg |
| 5次 | 10次 | 8次 |

**还会显示损耗率**：
- 损耗量：100.5 - 85.3 = 15.2 kg
- 损耗率：15.2 ÷ 100.5 × 100% = **15.1%**
- 颜色：🔴 红色（损耗率>10%，警告！）

**[截图：tracing-stage-stats.png - 环节统计卡片，三列布局]**

---

#### 操作时间线

完整的操作历史，从新到旧排列（最新的在最上面）：

```
↑ 成品出库    2.50 kg
  2026-01-21 16:45:30
  操作员：operator
  备注：正常出库

⚙ 加工过程    2.48 kg
  2026-01-21 14:20:15
  操作员：operator
  备注：加工检测

⚙ 加工过程    2.50 kg
  2026-01-21 10:15:00
  操作员：admin
  备注：质检

↓ 原料入库    2.55 kg
  2026-01-21 08:30:10
  操作员：operator
  备注：新批次入库
```

**图标说明**：
- ↓ **原料入库**：绿色，表示入库
- ⚙ **加工过程**：黄色，表示加工中
- ↑ **成品出库**：蓝色，表示出库

**信息说明**：
- **重量**：这次称重的重量值
- **时间**：称重的日期和时间
- **操作员**：是谁称的
- **备注**：额外信息

**[截图：tracing-timeline.png - 操作时间线，标注图标和信息]**

---

#### 追溯分析

通过操作时间线，可以追溯：

1. **质量问题排查**
   - 哪个环节重量异常？
   - 哪个操作员操作的？
   - 有没有备注说明？

2. **损耗分析**
   - 入库到出库，重量变化多少？
   - 哪个环节损耗最大？
   - 损耗率是否正常？

3. **流程追踪**
   - 这个批次经过了哪些环节？
   - 每个环节花了多长时间？
   - 有没有遗漏某个环节？

💡 **小提示**：如果发现损耗率异常（红色），一定要检查操作时间线，找出问题环节！

---

### 3.6 硬件测试

#### 什么时候用这个功能？

- ✅ 电子秤连不上，要测试连接
- ✅ 扫码枪不好使，要检查
- ✅ 查看实时硬件数据
- ✅ 调试硬件配置

⚠️ **权限说明**：只有管理员能使用硬件测试功能！

---

#### 进入硬件测试页面

首页 → 点"🔧 硬件测试"卡片 → 进入测试页面

**页面布局**：
- 左侧：电子秤测试区
- 右侧：扫码枪测试区
- 底部：事件日志区

**[截图：hardware-test-page.png - 硬件测试页面整体布局]**

---

#### 电子秤测试

##### 连接状态

显示电子秤当前连接状态：

| 状态 | 颜色 | 说明 |
|-----|------|------|
| **Connected** | 🟢 绿色 | 已连接，正常工作 |
| **Disconnected** | ⚪ 灰色 | 未连接或断开 |
| **Error** | 🔴 红色 | 连接错误 |

**[截图：scale-connection-status.png - 电子秤连接状态]**

---

##### 当前重量

实时显示电子秤读取的重量值：

```
当前重量：2.55 kg
```

---

##### 稳定性

显示重量是否稳定：

| 状态 | 颜色 | 说明 |
|-----|------|------|
| **✓ 重量稳定** | 🟢 绿色 | 重量不再跳动，可以保存 |
| **⚠ 重量变化中** | 🟡 黄色 | 重量还在跳动，等一会儿 |

---

##### 操作按钮

| 按钮 | 功能 |
|------|------|
| **Connect** | 连接电子秤 |
| **Disconnect** | 断开连接 |
| **Tare（去皮）** | 电子秤归零 |

💡 **小提示**：如果秤上有东西，点"Tare"按钮去皮，重量会归零！

**[截图：scale-buttons.png - 电子秤操作按钮]**

---

#### 扫码枪测试

##### 监听状态

显示扫码枪当前监听状态：

| 状态 | 颜色 | 说明 |
|-----|------|------|
| **Listening** | 🟢 绿色 | 正在监听扫码输入 |
| **Not Started** | ⚪ 灰色 | 未启动监听 |

---

##### 模拟扫码

用于测试扫码功能（不需要真实扫码枪）：

1. 在"条码输入框"输入条码
2. 点"模拟扫码"按钮
3. 系统推送扫码事件
4. 事件日志区显示："条码扫描：6901234567890"

**[截图：scanner-simulate.png - 扫码枪模拟测试]**

---

##### 最近扫码记录

显示最后一次扫码的信息：

```
最近扫码：6901234567890
时间：2026-01-21 16:45:30
```

**[截图：scanner-recent.png - 最近扫码记录]**

---

#### 事件日志

实时显示硬件事件，方便调试。

##### 日志格式

```
[16:45:30] 🟢 条码扫描：6901234567890
[16:44:25] 🟢 重量稳定：2.55 kg
[16:44:20] 🔵 重量变化：2.53 kg
[16:44:15] 🔵 重量变化：2.50 kg
[16:40:10] 🟢 电子秤已连接
[16:40:05] 🔴 连接错误：COM3端口未找到
```

##### 颜色编码

| 颜色 | 类型 | 说明 |
|------|------|------|
| 🔵 蓝色 | 信息 | 普通信息 |
| 🟢 绿色 | 成功 | 操作成功 |
| 🟡 黄色 | 警告 | 需要注意 |
| 🔴 红色 | 错误 | 出错了 |

##### 操作按钮

| 按钮 | 功能 |
|------|------|
| **Clear** | 清空日志 |

**[截图：hardware-event-log.png - 事件日志区]**

---

#### 常见硬件问题排查

##### ❓ 电子秤连不上？

1. 检查USB/串口线插好了没
2. 检查配置文件（appsettings.json）中的串口号是否正确
3. 查看事件日志，看看错误信息
4. 重启电子秤
5. 联系IT支持

---

##### ❓ 重量一直跳动，不稳定？

1. 等一会儿，让电子秤稳定
2. 检查秤放平了没
3. 点"Tare"按钮去皮
4. 检查秤周围有没有震动

---

##### ❓ 扫码枪没反应？

1. 检查USB连接
2. 重新插拔USB线
3. 用"模拟扫码"功能测试系统是否正常
4. 如果模拟扫码正常，说明是扫码枪硬件问题

---

### 3.7 系统设置

#### 什么时候用这个功能？

- ✅ 查看系统状态（运行时长、数据库大小）
- ✅ 下载数据库备份
- ✅ 查看应用版本信息

⚠️ **权限说明**：只有管理员能使用系统设置功能！

---

#### 进入系统设置页面

首页 → 点"⚙️ 系统设置"卡片 → 进入设置页面

**页面布局**：
- 应用信息卡片
- 系统状态监控卡片
- 数据库备份卡片

**[截图：settings-page.png - 系统设置页面]**

---

#### 应用信息

显示系统基本信息：

| 信息 | 值 |
|------|-----|
| **应用名称** | MiniMES 记账系统 |
| **版本** | v1.0.0 |
| **框架** | .NET 8.0 Blazor Server |
| **数据库** | SQLite / MySQL |

**[截图：settings-app-info.png - 应用信息卡片]**

---

#### 系统状态监控

显示系统运行状态：

| 状态 | 说明 |
|------|------|
| **启动时间** | 服务器什么时候启动的（如：2026-01-21 08:00:00） |
| **运行时长** | 已经运行多久了（如：8小时15分钟） |
| **数据库大小** | 数据库文件多大（如：15.8 MB） |
| **记录总数** | 一共有多少条称重记录（如：1,234条） |

**[截图：settings-system-status.png - 系统状态监控卡片]**

---

#### 数据库备份

##### 为什么要备份？

- 🔴 防止数据丢失（硬盘坏了、误删数据）
- 🔴 防止系统崩溃（停电、软件Bug）
- 🔴 方便数据迁移（换服务器、升级系统）

##### 怎么备份？

1. 点"下载数据库备份"按钮
2. 浏览器自动下载数据库文件
3. 文件名格式：`minimes_20260121_143025.db`
4. 把文件保存到安全的地方（U盘、网盘、NAS）

💡 **建议备份频率**：
- 每天备份一次（如果数据很重要）
- 每周备份一次（如果数据不太多）
- 重要操作前备份（如升级系统、批量删除数据）

**[截图：settings-backup.png - 数据库备份按钮]**

---

##### 怎么恢复备份？

⚠️ **注意**：恢复备份需要IT人员操作，普通管理员不要自己搞！

**恢复步骤**（IT人员）：
1. 停止MiniMES服务
2. 用备份文件替换当前数据库文件
3. 重启MiniMES服务
4. 测试系统是否正常

---

🔴 **重要警告**：
- 数据库备份非常重要！定期备份，防止数据丢失！
- 备份文件要妥善保管，别丢了！
- 备份文件包含所有数据，别泄露给无关人员！

---

## 4. 硬件设备说明

MiniMES系统支持两种硬件设备：**电子秤**和**扫码枪**。

---

### 4.1 电子秤使用

#### 支持的电子秤类型

系统支持两种电子秤：

| 类型 | 连接方式 | 支持协议 | 推荐型号 |
|-----|---------|---------|---------|
| **串口电子秤** | USB转串口线 | Toledo、Mettler、Generic | - |
| **WiFi电子秤** | WiFi网络 | UDP协议 | A&D UC-1000WF（推荐） |

---

#### 连接方式

##### 串口电子秤

1. 用USB转串口线连接电子秤和电脑
2. 在系统配置文件（appsettings.json）中设置串口号：
   ```json
   "Scale": {
     "PortName": "COM3",
     "Protocol": "Generic"
   }
   ```
3. 重启MiniMES服务
4. 在"硬件测试"页面点"Connect"按钮

##### WiFi电子秤

1. 电子秤和电脑连接同一WiFi网络
2. 在系统配置文件中设置IP地址和端口：
   ```json
   "Scale": {
     "IPAddress": "192.168.1.100",
     "Port": 10001
   }
   ```
3. 重启MiniMES服务
4. 电子秤自动连接（无需手动点Connect）

💡 **推荐**：WiFi电子秤更方便，不需要连线！

---

#### 演示模式

用**demo账户**登录时，电子秤自动切换为模拟模式：

- 自动推送随机重量（1-5 kg之间）
- 重量会跳动（模拟真实电子秤的抖动）
- 稳定后显示"✓ 稳定"
- 不需要真实电子秤硬件

💡 **演示模式非常适合新员工培训！**

**[截图：scale-demo-mode.png - 演示模式下的重量跳动]**

---

#### 电子秤使用技巧

##### ✅ 去皮操作

- **什么时候用**：秤上有容器（盒子、盘子），要扣除容器重量
- **怎么操作**：
  1. 把容器放秤上
  2. 在"硬件测试"页面点"Tare（去皮）"按钮
  3. 重量归零
  4. 放入商品，显示的就是净重

**[截图：scale-tare.png - 去皮操作]**

---

##### ✅ 等重量稳定

- 不要刚放上去就保存！
- 等重量不再跳动，看到"✓ 稳定"提示
- 稳定后的重量更准确

---

##### ✅ 检查连接状态

- 在"硬件测试"页面查看连接状态
- 如果显示"Disconnected"，点"Connect"重新连接
- 查看事件日志，看看有没有错误信息

---

#### 常见问题

##### ❓ 电子秤连不上？

**可能原因**：
- USB线松了
- 串口号配置错误
- 电子秤没开机

**解决方案**：
1. 检查USB线插好了没
2. 检查配置文件中的串口号（appsettings.json）
3. 确认电子秤已开机
4. 在"硬件测试"页面查看错误信息
5. 联系IT支持

---

##### ❓ 重量不准？

**可能原因**：
- 秤上有东西（没去皮）
- 秤没放平
- 秤坏了

**解决方案**：
1. 去皮操作
2. 检查秤放平了没
3. 用标准砝码测试（如果有）
4. 联系供应商维修

---

##### ❓ 重量一直跳动？

**可能原因**：
- 秤周围有震动
- 秤没放稳
- 风吹（秤旁边有风扇）

**解决方案**：
1. 把秤放在平稳的台面上
2. 远离震动源（机器、人走动）
3. 关掉风扇或空调
4. 等一会儿，让秤自己稳定

---

### 4.2 扫码枪使用

#### 支持的扫码枪类型

系统支持所有**USB键盘模拟**扫码枪：

| 类型 | 连接方式 | 说明 |
|-----|---------|------|
| **有线扫码枪** | USB线 | 即插即用，稳定可靠 |
| **无线扫码枪** | 蓝牙/2.4G | 需要配对，使用灵活 |

💡 **推荐**：有线扫码枪更稳定，适合固定工位！

---

#### 连接方式

##### 有线扫码枪

1. 插上USB线
2. 等电脑识别（一般几秒钟）
3. 直接使用（无需配置）

##### 无线扫码枪

**蓝牙扫码枪**：
1. 打开蓝牙
2. 扫描配对码（扫码枪说明书有）
3. 电脑蓝牙配对
4. 连接成功后使用

**2.4G扫码枪**：
1. USB接收器插电脑
2. 打开扫码枪
3. 自动配对
4. 直接使用

---

#### 演示模式

用**demo账户**登录时，扫码枪自动切换为模拟模式：

- 在"硬件测试"页面可以模拟扫码
- 输入条码，点"模拟扫码"按钮
- 系统推送扫码事件
- 不需要真实扫码枪硬件

💡 **演示模式非常适合新员工培训！**

---

#### 扫码枪使用技巧

##### ✅ 扫码距离

- **太近**：扫不出来（激光没法聚焦）
- **太远**：扫不出来（信号弱）
- **最佳距离**：5-15厘米

---

##### ✅ 扫码角度

- 对准条码中心
- 角度不要太斜（45度以内）
- 保持平行

---

##### ✅ 听声音

- **滴一声**：扫码成功
- **没声音**：扫码失败，重新扫

---

##### ✅ 条码质量

- 条码清晰、无破损
- 不要有污渍、折痕
- 不要被塑料袋遮挡

---

#### 常见问题

##### ❓ 扫码枪没反应？

**可能原因**：
- USB线松了
- 蓝牙没配对
- 扫码枪没开机
- 电池没电

**解决方案**：
1. 检查USB线或蓝牙连接
2. 重新插拔USB或重新配对蓝牙
3. 检查扫码枪开关
4. 充电或换电池
5. 手动输入条码也行

---

##### ❓ 扫出来是乱码？

**可能原因**：
- 扫码枪设置错误（键盘布局）
- 条码损坏

**解决方案**：
1. 参考扫码枪说明书重置设置
2. 扫描"恢复出厂设置"码（说明书有）
3. 手动输入条码
4. 联系供应商

---

##### ❓ 扫不出来？

**可能原因**：
- 条码太模糊
- 距离不对
- 角度不对
- 光线太强或太暗

**解决方案**：
1. 调整距离（5-15厘米）
2. 调整角度
3. 换个光线好的地方
4. 换张条码纸
5. 手动输入条码

---

### 4.3 硬件故障排查

常见硬件问题和解决方案汇总：

| 问题 | 可能原因 | 解决方案 |
|------|---------|---------|
| **电子秤连不上** | 串口号错误 | 检查appsettings.json配置 |
| **电子秤连不上** | USB线松了 | 重新插拔USB |
| **重量一直跳** | 秤不稳定 | 放平稳台面上，等稳定 |
| **重量不准** | 没去皮 | 点"Tare"按钮去皮 |
| **扫码枪没反应** | USB松了 | 重新插拔USB |
| **扫码枪没反应** | 蓝牙没配对 | 重新配对蓝牙 |
| **扫出乱码** | 设置错误 | 参考说明书重置 |
| **扫不出来** | 距离/角度不对 | 调整距离和角度 |
| **扫不出来** | 条码模糊 | 换张条码纸或手输 |

💡 **万能解决方案**：
1. 重启硬件
2. 重新插拔USB
3. 检查配置文件
4. 查看"硬件测试"页面的事件日志
5. 联系IT支持

---

## 5. 常见问题解答（FAQ）

### 5.1 登录问题

#### ❓ 密码忘记了？

**解决方案**：
1. 联系管理员重置密码
2. 管理员操作：用户管理 → 编辑用户 → 重置密码
3. 重置后，管理员告诉你新密码
4. 登录后立即在"个人中心"改成自己的密码

---

#### ❓ 登录后看不到某些功能？

**原因**：
- 你的角色权限不够

**检查方法**：
1. 看页面右上角，显示你的角色（操作员/管理员）
2. 操作员只能看生产功能（称重、查记录、商品管理）
3. 管理员能看所有功能

**解决方案**：
- 如果你需要更多权限，联系管理员提升你的角色

---

#### ❓ 演示模式怎么用？

**操作方法**：
1. 登录页面输入：
   - 用户名：`demo`
   - 密码：`demo123`
2. 点"登录"按钮
3. 登录后，硬件自动模拟数据（重量自动跳、条码自动推送）

💡 **注意**：演示账户的数据是真实数据，不是隔离的！

---

#### ❓ 登录时提示"用户名或密码错误"？

**可能原因**：
- 用户名输错了（注意大小写）
- 密码输错了
- 账号被禁用了

**解决方案**：
1. 仔细检查用户名和密码
2. 注意大小写（比如`Admin`和`admin`是不一样的）
3. 联系管理员检查账号状态

---

### 5.2 称重问题

#### ❓ 条码扫不出来？

**解决方案**：
1. 检查扫码枪USB连接
2. 调整扫码距离和角度
3. 手动输入条码也行
4. 联系IT支持

---

#### ❓ 重量不对？

**解决方案**：
1. 检查电子秤连接（硬件测试页面）
2. 去皮操作（点"Tare"按钮）
3. 等重量稳定再看
4. 手动输入重量

---

#### ❓ 不知道选哪个阶段？

**三个阶段的区别**：

| 阶段 | 什么时候选 | 举例 |
|-----|-----------|------|
| **原料入库** | 刚收到的原材料 | 刚买的大米，第一次称重 |
| **加工过程** | 加工中的半成品 | 清洗后的大米，检测重量 |
| **成品出库** | 最终产品发货 | 打包好的大米，发货前称重 |

💡 **记住**：同一个条码，要经过"入库→加工→出库"三个阶段！

---

#### ❓ 不小心删错记录了？

**抱歉**：
- ❌ 删了就找不回来了
- ✅ 只能重新称一次

**预防措施**：
- 删之前一定要看仔细！
- 确认对话框不要瞎点"确定"

---

#### ❓ 保存时提示"条码不能为空"？

**原因**：
- 没输入条码就点保存了

**解决方案**：
- 先扫码或手输条码，再点保存

---

#### ❓ 保存时提示"重量必须大于0"？

**原因**：
- 没输入重量，或输入了0

**解决方案**：
- 等电子秤推送重量，或手动输入重量值（必须>0）

---

### 5.3 硬件问题

#### ❓ 电子秤连不上？

**排查步骤**：
1. 检查USB/串口线插好了没
2. 检查配置文件（appsettings.json）串口号是否正确
3. 去"硬件测试"页面查看连接状态和事件日志
4. 重启电子秤
5. 联系IT支持

---

#### ❓ 扫码枪没反应？

**排查步骤**：
1. 检查USB连接或蓝牙配对
2. 重新插拔USB或重新配对
3. 检查扫码枪开关和电池
4. 用"模拟扫码"功能测试系统是否正常
5. 手动输入条码也行

---

#### ❓ 重量一直跳动，不稳定？

**解决方案**：
1. 把秤放平稳台面上
2. 远离震动源（机器、人走动）
3. 关掉风扇或空调
4. 等一会儿，让秤自己稳定

---

### 5.4 数据导出问题

#### ❓ Excel导出失败？

**可能原因**：
- 浏览器下载被拦截
- 磁盘空间不足
- 网络问题

**解决方案**：
1. 检查浏览器下载设置（允许下载）
2. 检查磁盘空间
3. 重试一次
4. 换个浏览器试试

---

#### ❓ Excel打不开？

**可能原因**：
- 文件没下载完整
- 文件格式不兼容
- 没安装Excel或WPS

**解决方案**：
1. 确保文件完整下载（看文件大小）
2. 用Excel或WPS打开（不要改文件名）
3. 重新导出一次

---

#### ❓ Excel里的数据不对？

**可能原因**：
- 时间周期选错了
- 过滤条件设置错了

**解决方案**：
1. 检查报表页面的时间周期和过滤条件
2. 重新选择正确的条件
3. 重新导出

---

## 6. 附录

### A. 权限对照表

| 功能 | 操作员 | 管理员 |
|------|--------|--------|
| **公开页面** |  |  |
| 登录/登出 | ✅ | ✅ |
| **基础功能** |  |  |
| 首页 | ✅ | ✅ |
| 个人中心 | ✅ | ✅ |
| **生产管理** |  |  |
| 生产称重 | ✅ | ✅ |
| 称重记录查询 | ✅（只看自己的） | ✅（看所有人的） |
| **基础数据管理** |  |  |
| 商品管理（CRUD） | ✅ | ✅ |
| 客户管理（CRUD） | ❌ | ✅ |
| **用户管理** |  |  |
| 用户管理（CRUD） | ❌ | ✅ |
| 修改自己的密码 | ✅ | ✅ |
| **报表功能** |  |  |
| 生产报表导出 | ❌ | ✅ |
| 质量追溯 | ❌ | ✅ |
| **系统管理** |  |  |
| 硬件测试 | ❌ | ✅ |
| 系统设置 | ❌ | ✅ |
| 数据库备份 | ❌ | ✅ |

---

### B. 快捷键列表

| 快捷键 | 功能 | 页面 |
|--------|------|------|
| **回车键** | 自动跳转到下一个输入框 | 生产称重页面 |
| **回车键** | 保存记录（在重量输入框） | 生产称重页面 |
| **回车键** | 触发搜索 | 质量追溯页面 |
| **回车键** | 触发查询 | 称重记录查询页面 |
| **Ctrl+Alt+A** | 微信截图（标注用） | 系统外 |

💡 **小提示**：连续称重时，善用回车键可以大大提高效率！

---

### C. 术语表

| 术语 | 英文 | 说明 |
|------|------|------|
| **称重记录** | Weighing Record | 一次完整的扫码-称重-存档操作 |
| **加工阶段** | Process Stage | 原料入库/加工过程/成品出库 |
| **损耗率** | Loss Rate | (入库重量 - 出库重量) / 入库重量 × 100% |
| **质量追溯** | Traceability | 按条码查询完整的操作历史链路 |
| **演示模式** | Demo Mode | 用demo账户登录，硬件自动模拟数据 |
| **去皮** | Tare | 电子秤归零操作，扣除容器重量 |
| **稳定** | Stable | 重量不再跳动，可以保存 |
| **条码** | Barcode | 商品唯一标识，用于追溯和统计 |
| **批次** | Batch | 同一批次的商品，条码相同 |
| **操作员** | Operator | 只能进行生产操作的用户角色 |
| **管理员** | Administrator | 拥有所有权限的用户角色 |

---

## 7. 联系支持

### 技术支持

- **邮箱**：support@minimes.example.com
- **电话**：400-xxx-xxxx
- **工作时间**：周一至周五 9:00-18:00

### 问题反馈

- **GitHub Issues**：[https://github.com/your-org/minimes/issues](https://github.com/your-org/minimes/issues)
- **邮箱**：feedback@minimes.example.com

### 在线文档

- **项目主页**：[https://minimes.example.com](https://minimes.example.com)
- **部署文档**：查看项目根目录 `DEPLOYMENT.md`
- **开发文档**：查看项目根目录 `CLAUDE.md`

---

## 更新日志

| 版本 | 日期 | 更新内容 |
|------|------|---------|
| v1.0.0 | 2026-01-21 | 首次发布，包含完整用户手册 |

---

**© 2026 MiniMES 记账系统 | 用户手册 v1.0.0**

---

**祝你使用愉快！** 🎉

如有问题，随时联系技术支持！
